<!DOCTYPE html>
<html class="light" lang="de-DE">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link href="/app.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-visual" />
    <title>Schulportal Hessen</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="Schulportal Hessen">
    <meta name="theme-color" content="#18d6ee">
    <link rel="preconnect" href="https://derownerhd.github.io">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400&display=swap" rel="stylesheet">
    <script src="/app.js" defer></script>
</head>
<body>
    <div class="background">
        <div class="image generic"></div>
        <div class="overlay"></div>
    </div>
    <div class="wrapper">
        <div class="header">
            <p>Schulportal<small>APP</small></p>
            <div class="settings" onclick="openMenu('settings');">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>
        <div class="app-tile-container flex w-100 justify-center flex-row flex-wrap d-none" style="overflow-y: auto;">
            <div class="app-tile" type="moodle">
                <div class="app-tile-overlay"></div>
                <div class="app-tile-icon fab fa-jsfiddle"></div>
                <div class="app-tile-title">
                    SchulMoodle
                    <div class="app-tile-news-wrapper"></div>
                </div>
            </div>
            <div class="app-tile" type="splan">
                <div class="app-tile-overlay"></div>
                <div class="app-tile-icon fas fa-hourglass-half"></div>
                <div class="app-tile-title">
                    Stundenplan
                    <div class="app-tile-news-wrapper"></div>
                </div>
            </div>
            <div class="app-tile" type="vplan">
                <div class="app-tile-overlay"></div>
                <div class="app-tile-icon fas fa-book"></div>
                <div class="app-tile-title">
                    Vertretungsplan
                    <div class="app-tile-news-wrapper"></div>
                </div>
            </div>
            <div class="app-tile" type="cal">
                <div class="app-tile-overlay"></div>
                <div class="app-tile-icon fa-solid fa-calendar-days"></div>
                <div class="app-tile-title">
                    Schulkalender
                    <div class="app-tile-news-wrapper">
                        <div class="app-tile-news">Wird geladen</div>
                    </div>
                </div>
            </div>
            <div class="app-tile" type="messages">
                <div class="app-tile-overlay"></div>
                <div class="app-tile-icon fa-solid fa-envelope-open-text"></div>
                <div class="app-tile-title">
                    Direktnachrichten
                    <div class="app-tile-news-wrapper">
                        <div class="app-tile-news">Keine neuen Nachrichten</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer d-none">
            <i class="fa-solid fa-bars"></i>
        </div>
    </div>
    <div class="progress-box-wrapper">
        <div class="progress-box">
            <img src="https://derownerhd.github.io/skyblock/loading.gif">
            <div>
                <p>Wird geladen</p>
                <small></small>
            </div>
        </div>
    </div>
    <div class="menu-wrapper">
        <div class="menu d-none" type="login">
            <div class="top-wrapper">
                <div class="title">
                    Anmeldung
                </div>
                <div class="button-wrapper">
                    <div class="top-button" action="help">
                        <i class="fa-solid fa-question"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <div class="input-wrapper">
                    <input name="username" placeholder="Vorname.Nachname" autofocus="" value="" required="" data-form-prefill="username">
                    <input name="id" placeholder="Schule" autofocus="" value="" required="">
                </div>
                <div class="input-wrapper">
                    <input name="password" type="password" placeholder="Passwort" value="" required="" data-form-prefill="password">
                    <div class="top-button" action="password-visibility">
                        <i class="fa-solid fa-eye-slash"></i>
                    </div>
                </div>
                <div class="button blue" action="login">
                    Anmelden
                </div>
                <small>Deine Daten werden im Browser gespeichert</small>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="login-help">
            <div class="top-wrapper">
                <div class="title">
                    Anmeldehilfe
                </div>
                <div class="button-wrapper">
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <div class="info-box">
                    <div class="top">Name</div>
                    <div class="text">Max.Mustermann</div>
                </div>
                <div class="info-box">
                    <div class="top">Passwort</div>
                    <div class="text">Dein Passwort <small>(Hoffentlich gut)</small></div>
                </div>
                <div class="info-box">
                    <div class="top">ID</div>
                    <div class="text">ID der Schule <small>(1-9999)</small></div>
                </div>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="splan">
            <div class="top-wrapper">
                <div class="title">
                    Stundenplan
                    <small>Fehler beim Laden</small>
                </div>
                <div class="button-wrapper">
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
                <div class="button-wrapper left">
                    <div class="top-button splan-switcher">
                        <i class="fa-solid fa-repeat"></i>
                        <select></select>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <table class="lesson-plan">
                    <tr>
                        <th>
                            <i class="fa-solid fa-clock"></i>
                        </th>
                        <th>Mo</th>
                        <th>Di</th>
                        <th>Mi</th>
                        <th>Do</th>
                        <th>Fr</th>
                    </tr>
                </table>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="cal">
            <div class="top-wrapper">
                <div class="title">
                    Kalender
                </div>
                <div class="button-wrapper">
                    <div class="top-button" action="export">
                        <i class="fa-solid fa-download"></i>
                    </div>
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="selection-wrapper">
                <div class="filter-selector">
                    <select class="filters">
                        <option value="0" selected="">Alle</option>
                        <option value="1">Klausur</option>
                        <option value="2">Interne Fortbildung</option>
                        <option value="3">Besprechung</option>
                        <option value="4">Veranstaltung</option>
                        <option value="5">Schulfrei</option>
                        <option value="6">Konferenz</option>
                        <option value="7">Wartung</option>
                        <option value="8">Fachkonferenz</option>
                        <option value="9">Externe Fortbildung</option>
                        <option value="10">Abitur</option>
                    </select>
                    <i class="fa-solid fa-filter"></i>
                </div>
                <div class="calendar-month-selector">
                    <i class="calendar-month-move fa-solid fa-angle-left" direction="left"></i>
                    <p>Wird geladen</p>
                    <i class="calendar-month-move fa-solid fa-angle-right" direction="right"></i>
                </div>
                <div class="search">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>
            </div>
            <div class="main-wrapper">
                <table class="calendar-month">
                    <tr class="main-header">
                        <th>KW</th>
                        <th>Mo</th>
                        <th>Di</th>
                        <th>Mi</th>
                        <th>Do</th>
                        <th>Fr</th>
                        <th>Sa</th>
                        <th>So</th>
                    </tr>
                </table>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="cal-export">
            <div class="top-wrapper">
                <div class="title">
                    Export
                </div>
                <div class="button-wrapper">
                    <div class="top-button" action="copy">
                        <i class="fa-regular fa-clipboard"></i>
                    </div>
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <div class="info-box" style="justify-self: center;">
                    <div class="top">Link</div>
                    <div class="text">Wird geladen</div>
                </div>
                <p style="text-align: center; padding: 0 2rem;">Mithilfe dieses Links wird der Kalender in deinem Programm immer aktuell gehalten. Halte diesen Link immer geheim!</p>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="vplan">
            <div class="top-wrapper">
                <div class="title">
                    N/A
                    <small>N/A</small>
                </div>
                <div class="button-wrapper">
                    <div class="top-button extended" action="relative">
                        <p class="text"></p>
                    </div>
                    <div class="top-button extended icon" action="news">
                        <i class="fa-solid fa-newspaper"></i>
                        <p class="text">0</p>
                    </div>
                    <div class="top-button" action="switch">
                        <i class="fa-solid fa-repeat"></i>
                    </div>
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <table class="vertretungen">
                    <tr>
                        <th><i class="fa-solid fa-clock"></i></th>
                        <th><i class="fa-solid fa-book"></i></th>
                        <th><i class="fa-solid fa-user"></i></th>
                        <th><i class="fa-solid fa-user-slash"></i></th>
                        <th><i class="fa-solid fa-location-dot"></i></th>
                        <th><i class="fa-solid fa-info"></i></th>
                    </tr>
                    <div></div>
                </table>
                <p class="empty">Keine Vertretungen</p>
            </div>
            <div class="footer-wrapper">
                <div class="top-button extended icon" action="last-refreshed">
                    <i class="fa-regular fa-clock"></i>
                    <p class="text">N/A</p>
                </div>
            </div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="vplan-news">
            <div class="top-wrapper">
                <div class="title">
                    Neuigkeiten
                </div>
                <div class="button-wrapper">
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper"></div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="settings">
            <div class="top-wrapper">
                <div class="title">
                    Einstellungen
                </div>
                <div class="button-wrapper left">
                    <div class="top-button d-none" action="back">
                        <i class="fa-solid fa-angle-left"></i>
                    </div>
                </div>
                <div class="button-wrapper">
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper"></div>
            <div class="white-space"></div>
        </div>
        <div class="menu d-none" type="messages">
            <div class="top-wrapper">
                <div class="title">
                    Nachrichten
                </div>
                <div class="button-wrapper">
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div class="main-wrapper">
                <div class="messages-selector">
                    <div class="selector">Schulportal</div>
                    |
                    <div class="selector selected">Moodle</div>
                </div>
                <div class="messages-browser">
                    <div class="message">
                        <img class="icon" src="https://cdn.vox-cdn.com/uploads/chorus_asset/file/22312759/rickroll_4k.jpg">
                        <div>
                            <p class="name">Name<span>1. Januar 1970</span></p>
                            <p class="description">testsetsetsetsetsetsetsetsetsetsetsetsetsetsetsetset</p>
                        </div>
                    </div>
                </div>
                <div class="message-details d-none"></div>
            </div>
            <div class="white-space"></div>
        </div>
    </div>
    <div class="notification-reminder d-none">
        <i class="fa-regular fa-bell icon"></i>
        <div class="top-button d-none" action="notifications-no">
            <i class="fa-solid fa-xmark"></i>
        </div>
        <p class="d-none">Dürfen wir dir Benachrichtungen senden?</p>
        <div class="top-button d-none" action="notifications-yes">
            <i class="fa-solid fa-check"></i>
        </div>   
    </div>
    <div class="calendar-info-box d-none">
        <div class="top">
            <div class="icon">
                N/A
            </div>
            <div class="title">Kein Titel</div>
            <div class="close-button">
                <i class="fa-solid fa-xmark"></i>
            </div>
        </div>
        <div class="buttons">
            <div class="button">
                <i class="fa-solid fa-location-dot"></i>
                <span>N/A</span>
            </div>
            <div class="button">
                <i class="fa-regular fa-clock"></i>
                <span>Wird geladen</span>
            </div>
            <div class="button d-none">
                <i class="fa-solid fa-lock"></i>
            </div>
        </div>
        <div class="description">
            Keine Beschreibung
        </div>
    </div>
    <div class="calendar-search d-none">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input placeholder="Suchen" value="">
    </div>
    <div class="force-reload-box d-none">
        <img src="https://i.imgur.com/vOzclrW.png">
        <p>Anmeldedaten abgelaufen</p>
        <div class="top-button" onclick="location.reload()">
            <i class="fa-solid fa-rotate-right"></i>
        </div>
    </div>
    <div class="app-tile-dropdown-wrapper d-none">
        <div class="app-tile-dropdown-background"></div>
    </div>
    <div class="dialog-wrapper">
        <div class="dialog-box-container">
            <div class="dialog-box">
                <div class="title">
                    Abmeldung
                    <div class="close-button">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
                <div class="text">
                    Durch eine Abmeldung werden deine Anmeldedaten gelöscht
                </div>
                <div class="actions">
                    <div class="action danger" action="logoff">
                        Weiter
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="no-rotate">
        <div class="no-rotate-text-wrapper">
            <h1>Nur im Hochformat verfügbar</h1>
        </div>
    </div>
    <div class="console d-none">
        <div class="output"></div>
        <div class="input">
            <input placeholder="JS Code hier eingeben" autocomplete="off" spellcheck="false" autocorrect="off">
            <div>
                <button onclick="$('.console').addClass('d-none')">X</button>
                <button onclick="evalConsoleInput()">Los!</button>
            </div>
        </div>
    </div>
</body>
<script>
    const workerChannel = new BroadcastChannel("worker");
    $(document).ready(async () => {
        
        generateConsoleLogger();
        console.log("Loaded!");
        // This indicates that that isn't a debugging enviroment
        if (location.href.startsWith("https://"))
            orientationChange();
        else {
            $(":root").addClass("dev");
            $(".header > p > small").html("DEV");
        }

        checkForServiceWorkerUpdates();

        $(".menu-wrapper").hide();

        if (!localStorage.getItem("settings"))
            firstLoad();

        await checkLogin();

        if (Notification.permission === "granted" && !getSetting("noServiceWorker"))
            loadServiceWorker(false);

        if (navigator.standalone || window.matchMedia("(display-mode: standalone)").matches)
            $("html").addClass("standalone-app");

        document.querySelector(".calendar-search input").value = "";

    });
</script>
</html>